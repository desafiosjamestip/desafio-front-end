{"ast":null,"code":"var _jsxFileName = \"/home/pierre/Documentos/projects/Q2/sprint6/icash/src/pages/PaymentWithCard/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { motion } from \"framer-motion\";\nimport { Container, Payment, PaymentOptions, Proof, DesktopProof, Value, Options, DesktopTitle, Icash, Pay, BackArrow, AvailableValue } from \"./styles\";\nimport ProofMobile from \"../../assets/paymentProof.svg\";\nimport ProofDesktop from \"../../assets/ProofPaymentScreenDesktop.svg\";\nimport BackArrowIMG from \"../../assets/ArrowLeftPayment.svg\";\nimport { useHistory } from \"react-router-dom\";\nimport HeaderDesktopUserWallet from \"../../components/HeaderDesktopUserWallet\";\nimport Logo from \"../../assets/LogoHeaderPayment.svg\"; // import ApprovedTransactionModal from \"../../components/ApprovedTransactionModal\";\n\nimport { usePayment } from \"../../providers/Payment\";\nimport { useStoreRegister } from \"../../providers/store-register\";\nimport { useState } from \"react\";\nimport formatValue from \"../../utils/formatValue\";\nimport { useUpdate } from \"../../providers/UserProvider\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PaymentWithCard = () => {\n  _s();\n\n  const history = useHistory();\n  const {\n    finishCardPay\n  } = usePayment();\n  const [inputValue, setInputValue] = useState(\"\");\n  const userId = JSON.parse(localStorage.getItem(\"@iCash: userId\") || \"\");\n  const storeId = Number(localStorage.getItem(\"@iCash: storeId\"));\n  const {\n    stores\n  } = useStoreRegister();\n  const store = stores.find(element => element.id === storeId);\n  const storeCashback = store === null || store === void 0 ? void 0 : store.cashback;\n  const {\n    user,\n    UpdateUser\n  } = useUpdate();\n\n  const validator = () => {\n    const newCashback = user.cashback + Number(inputValue) * Number(storeCashback) / 100;\n    const newData = {\n      cashback: newCashback\n    };\n    history.push(\"/dashboard\");\n    UpdateUser(newData, userId);\n  };\n\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    initial: {\n      opacity: 0\n    },\n    animate: {\n      opacity: 1\n    },\n    exit: {\n      opacity: 0\n    },\n    transition: {\n      duration: 0.5\n    },\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(HeaderDesktopUserWallet, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Payment, {\n        children: [/*#__PURE__*/_jsxDEV(Proof, {\n          src: ProofMobile,\n          alt: \"Comprovante\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DesktopProof, {\n          src: ProofDesktop,\n          alt: \"Comprovante\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Minha conta\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Voc\\xEA est\\xE1 realizando um pagamento em \", store === null || store === void 0 ? void 0 : store.name, \" -\", \" \" + (store === null || store === void 0 ? void 0 : store.address)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Icash, {\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: Logo,\n          alt: \"Logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DesktopTitle, {\n        children: \"Pagamento com cart\\xE3o\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PaymentOptions, {\n        children: [/*#__PURE__*/_jsxDEV(AvailableValue, {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Digite o valor da compra\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Value, {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"R$ \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: inputValue,\n              onChange: e => setInputValue(e.currentTarget.value),\n              step: \".01\",\n              min: \"0\",\n              placeholder: \"0.00\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Options, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              children: formatValue(Number(inputValue) * Number(storeCashback) / 100)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Acumulados na sua carteira\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              children: [store === null || store === void 0 ? void 0 : store.cashback, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Cashback\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Pay, {\n          onClick: validator,\n          children: \"Pagar conta\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(BackArrow, {\n        onClick: () => history.push(\"/payment\"),\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: BackArrowIMG,\n          alt: \"Voltar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PaymentWithCard, \"pL3ffJ2iiMFohykn++2/EzLTThU=\", false, function () {\n  return [useHistory, usePayment, useStoreRegister, useUpdate];\n});\n\n_c = PaymentWithCard;\nexport default PaymentWithCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"PaymentWithCard\");","map":{"version":3,"sources":["/home/pierre/Documentos/projects/Q2/sprint6/icash/src/pages/PaymentWithCard/index.tsx"],"names":["motion","Container","Payment","PaymentOptions","Proof","DesktopProof","Value","Options","DesktopTitle","Icash","Pay","BackArrow","AvailableValue","useHistory","HeaderDesktopUserWallet","usePayment","useStoreRegister","useState","formatValue","useUpdate","PaymentWithCard","history","finishCardPay","inputValue","setInputValue","userId","JSON","parse","localStorage","getItem","storeId","Number","stores","store","find","element","id","storeCashback","cashback","user","UpdateUser","validator","newCashback","newData","push","opacity","duration","ProofMobile","ProofDesktop","name","address","Logo","e","currentTarget","value","BackArrowIMG"],"mappings":"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","sourcesContent":["import { motion } from \"framer-motion\";\nimport {\n  Container,\n  Payment,\n  PaymentOptions,\n  Proof,\n  DesktopProof,\n  Value,\n  Options,\n  DesktopTitle,\n  Icash,\n  Pay,\n  BackArrow,\n  AvailableValue,\n} from \"./styles\";\nimport ProofMobile from \"../../assets/paymentProof.svg\";\nimport ProofDesktop from \"../../assets/ProofPaymentScreenDesktop.svg\";\nimport BackArrowIMG from \"../../assets/ArrowLeftPayment.svg\";\nimport { useHistory } from \"react-router-dom\";\nimport HeaderDesktopUserWallet from \"../../components/HeaderDesktopUserWallet\";\nimport Logo from \"../../assets/LogoHeaderPayment.svg\";\n// import ApprovedTransactionModal from \"../../components/ApprovedTransactionModal\";\nimport { usePayment } from \"../../providers/Payment\";\nimport { useStoreRegister } from \"../../providers/store-register\";\nimport { Input } from \"../../components/Input\";\nimport { useState } from \"react\";\nimport formatValue from \"../../utils/formatValue\";\nimport { useUpdate } from \"../../providers/UserProvider\";\n\ninterface NewData {\n  cashback: number;\n}\n\nconst PaymentWithCard = () => {\n  const history = useHistory();\n  const { finishCardPay } = usePayment();\n  const [inputValue, setInputValue] = useState<string>(\"\");\n  const userId = JSON.parse(localStorage.getItem(\"@iCash: userId\") || \"\");\n\n  const storeId = Number(localStorage.getItem(\"@iCash: storeId\"));\n\n  const { stores } = useStoreRegister();\n  const store = stores.find((element) => element.id === storeId);\n  const storeCashback = store?.cashback;\n\n  const { user, UpdateUser } = useUpdate();\n\n  const validator = () => {\n    const newCashback =\n      user.cashback + (Number(inputValue) * Number(storeCashback)) / 100;\n    const newData = { cashback: newCashback };\n    history.push(\"/dashboard\");\n    UpdateUser(newData, userId);\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      transition={{ duration: 0.5 }}\n    >\n      <Container>\n        <HeaderDesktopUserWallet />\n        <Payment>\n          <Proof src={ProofMobile} alt=\"Comprovante\" />\n          <DesktopProof src={ProofDesktop} alt=\"Comprovante\" />\n          <h3>Minha conta</h3>\n          <p>\n            Você está realizando um pagamento em {store?.name} -\n            {\" \" + store?.address}\n          </p>\n        </Payment>\n        <Icash>\n          <img src={Logo} alt=\"Logo\" />\n        </Icash>\n        <DesktopTitle>Pagamento com cartão</DesktopTitle>\n        <PaymentOptions>\n          <AvailableValue>\n            <p>Digite o valor da compra</p>\n          </AvailableValue>\n          <Value>\n            <h2>R$ </h2>\n            <div>\n              <input\n                type=\"number\"\n                value={inputValue}\n                onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\n                  setInputValue(e.currentTarget.value)\n                }\n                step=\".01\"\n                min=\"0\"\n                placeholder=\"0.00\"\n              />\n            </div>\n          </Value>\n          <Options>\n            <div>\n              <h1>\n                {formatValue(\n                  (Number(inputValue) * Number(storeCashback)) / 100\n                )}\n              </h1>\n              <p>Acumulados na sua carteira</p>\n            </div>\n            <div>\n              <h1>{store?.cashback}%</h1>\n              <p>Cashback</p>\n            </div>\n          </Options>\n          <Pay onClick={validator}>Pagar conta</Pay>\n        </PaymentOptions>\n        <BackArrow onClick={() => history.push(\"/payment\")}>\n          <img src={BackArrowIMG} alt=\"Voltar\" />\n        </BackArrow>\n      </Container>\n    </motion.div>\n  );\n};\n\nexport default PaymentWithCard;\n"]},"metadata":{},"sourceType":"module"}