{"ast":null,"code":"var _jsxFileName = \"/home/pierre/Documentos/projects/Q2/sprint6/icash/src/providers/Auth/index.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { createContext, useContext, useState } from \"react\";\nimport api from \"../../services/api\";\nimport { userData } from \"../../types/userLoginData\";\nimport toast from \"react-hot-toast\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext({});\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n\n  const getToken = localStorage.getItem(\"@iCash:token\") || \"\";\n  const UserName = localStorage.getItem(\"UserName\") || \"\";\n  const [token, setToken] = useState(getToken);\n  const [username, setUsername] = useState(UserName);\n\n  const login = (userData, history) => {\n    api.post(\"/login\", userData).then(res => {\n      localStorage.clear(); // setUsername(res.data.name);\n      // localStorage.setItem(\"UserName\", res.data.name);\n      // localStorage.setItem(\"@iCash:token\", res.data.accessToken);\n\n      console.log(res.data.accessToken);\n      history.push(\"/dashboard\");\n      toast.success(\"Usu치rio logado com sucesso!\");\n    }).catch(err => {\n      console.log(\"ERRO\", err);\n      toast.error(\"Verifique seus dados. Caso seja um novo usu치rio, crie sua conta.\");\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      login,\n      token,\n      setToken,\n      username\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AuthProvider, \"4XE571EW40ZOR/UkKHQIeOfs7Mk=\");\n\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n\n  return useContext(AuthContext);\n};\n\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"sources":["/home/pierre/Documentos/projects/Q2/sprint6/icash/src/providers/Auth/index.tsx"],"names":["createContext","useContext","useState","api","userData","toast","AuthContext","AuthProvider","children","getToken","localStorage","getItem","UserName","token","setToken","username","setUsername","login","history","post","then","res","clear","console","log","data","accessToken","push","success","catch","err","error","useAuth"],"mappings":";;;;AAAA,SACEA,aADF,EAEEC,UAFF,EAGEC,QAHF,QAOO,OAPP;AAQA,OAAOC,GAAP,MAAgB,oBAAhB;AACA,SAASC,QAAT,QAAyB,2BAAzB;AAEA,OAAOC,KAAP,MAAkB,iBAAlB;;AAaA,MAAMC,WAAW,gBAAGN,aAAa,CAAmB,EAAnB,CAAjC;AAEA,OAAO,MAAMO,YAAY,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAqC;AAAA;;AAC/D,QAAMC,QAAQ,GAAGC,YAAY,CAACC,OAAb,CAAqB,cAArB,KAAwC,EAAzD;AACA,QAAMC,QAAQ,GAAGF,YAAY,CAACC,OAAb,CAAqB,UAArB,KAAoC,EAArD;AACA,QAAM,CAACE,KAAD,EAAQC,QAAR,IAAoBZ,QAAQ,CAACO,QAAD,CAAlC;AACA,QAAM,CAACM,QAAD,EAAWC,WAAX,IAA0Bd,QAAQ,CAACU,QAAD,CAAxC;;AAEA,QAAMK,KAAK,GAAG,CAACb,QAAD,EAAqBc,OAArB,KAA0C;AACtDf,IAAAA,GAAG,CACAgB,IADH,CACQ,QADR,EACkBf,QADlB,EAEGgB,IAFH,CAESC,GAAD,IAAS;AACbX,MAAAA,YAAY,CAACY,KAAb,GADa,CAEb;AACA;AACA;;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACI,IAAJ,CAASC,WAArB;AACAR,MAAAA,OAAO,CAACS,IAAR,CAAa,YAAb;AACAtB,MAAAA,KAAK,CAACuB,OAAN,CAAc,6BAAd;AACD,KAVH,EAWGC,KAXH,CAWUC,GAAD,IAAS;AACdP,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBM,GAApB;AACAzB,MAAAA,KAAK,CAAC0B,KAAN,CACE,kEADF;AAGD,KAhBH;AAiBD,GAlBD;;AAoBA,sBACE,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAE;AAAEd,MAAAA,KAAF;AAASJ,MAAAA,KAAT;AAAgBC,MAAAA,QAAhB;AAA0BC,MAAAA;AAA1B,KAA7B;AAAA,cACGP;AADH;AAAA;AAAA;AAAA;AAAA,UADF;AAKD,CA/BM;;GAAMD,Y;;KAAAA,Y;AAiCb,OAAO,MAAMyB,OAAO,GAAG;AAAA;;AAAA,SAAM/B,UAAU,CAACK,WAAD,CAAhB;AAAA,CAAhB;;IAAM0B,O","sourcesContent":["import {\n  createContext,\n  useContext,\n  useState,\n  ReactNode,\n  Dispatch,\n  SetStateAction,\n} from \"react\";\nimport api from \"../../services/api\";\nimport { userData } from \"../../types/userLoginData\";\nimport { History } from \"history\";\nimport toast from \"react-hot-toast\";\n\ninterface AuthProviderProps {\n  children: ReactNode;\n}\n\ninterface AuthProviderData {\n  login: (userData: userData, history: History) => void;\n  token: string;\n  username: string;\n  setToken: Dispatch<SetStateAction<string>>;\n}\n\nconst AuthContext = createContext<AuthProviderData>({} as AuthProviderData);\n\nexport const AuthProvider = ({ children }: AuthProviderProps) => {\n  const getToken = localStorage.getItem(\"@iCash:token\") || \"\";\n  const UserName = localStorage.getItem(\"UserName\") || \"\";\n  const [token, setToken] = useState(getToken);\n  const [username, setUsername] = useState(UserName);\n\n  const login = (userData: userData, history: History) => {\n    api\n      .post(\"/login\", userData)\n      .then((res) => {\n        localStorage.clear();\n        // setUsername(res.data.name);\n        // localStorage.setItem(\"UserName\", res.data.name);\n        // localStorage.setItem(\"@iCash:token\", res.data.accessToken);\n        console.log(res.data.accessToken);\n        history.push(\"/dashboard\");\n        toast.success(\"Usu치rio logado com sucesso!\");\n      })\n      .catch((err) => {\n        console.log(\"ERRO\", err);\n        toast.error(\n          \"Verifique seus dados. Caso seja um novo usu치rio, crie sua conta.\"\n        );\n      });\n  };\n\n  return (\n    <AuthContext.Provider value={{ login, token, setToken, username }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => useContext(AuthContext);\n"]},"metadata":{},"sourceType":"module"}