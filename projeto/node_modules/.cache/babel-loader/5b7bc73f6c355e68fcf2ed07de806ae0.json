{"ast":null,"code":"var _jsxFileName = \"/home/pierre/Documentos/projects/Q2/sprint6/icash/src/providers/store-register/index.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { createContext, useCallback, useContext, useEffect, useState } from \"react\";\nimport toast from \"react-hot-toast\";\nimport api from \"../../services/api\";\nimport { useAuth } from \"../Auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StoreRegisterContext = /*#__PURE__*/createContext({});\nexport const StoreRegisterProvider = ({\n  children\n}) => {\n  _s();\n\n  const [showModalStore, setShowModalStore] = useState(false);\n  const [stores, setStores] = useState([]);\n  const {\n    token\n  } = useAuth();\n  const [idStore, setIdStore] = useState(0);\n  const [isLoading, setIsLoading] = useState(false);\n  const storeRegister = useCallback((data, setShowModalStore) => {\n    api.post(\"/stores\", data, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(() => {\n      toast.success(\"Loja Cadastrada\");\n      setShowModalStore(false);\n    }).catch(() => toast.error(\"Erro ao cadastrar loja\"));\n  }, [token]);\n  const storeUpdate = useCallback((data, setShowModalStore, storeId) => {\n    api.patch(`/stores/${storeId}`, data, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(() => {\n      toast.success(\"Dados atualizados\");\n      setShowModalStore(false);\n    }).catch(() => toast.error(\"Erro ao atualizar dados\"));\n  }, [token]);\n  useEffect(() => {\n    if (token) {\n      setIsLoading(true);\n      api.get(\"/stores\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(res => {\n        setStores(res.data);\n        setIsLoading(false);\n      }).catch(err => console.log(err));\n    }\n  }, [token, storeRegister, storeUpdate]);\n  return /*#__PURE__*/_jsxDEV(StoreRegisterContext.Provider, {\n    value: {\n      idStore,\n      setIdStore,\n      stores,\n      storeUpdate,\n      storeRegister,\n      setShowModalStore,\n      showModalStore,\n      isLoading\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this);\n};\n\n_s(StoreRegisterProvider, \"x/2rn6OJrtSggfPGpk7bShLI4yI=\", false, function () {\n  return [useAuth];\n});\n\n_c = StoreRegisterProvider;\nexport const useStoreRegister = () => {\n  _s2();\n\n  return useContext(StoreRegisterContext);\n};\n\n_s2(useStoreRegister, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"StoreRegisterProvider\");","map":{"version":3,"sources":["/home/pierre/Documentos/projects/Q2/sprint6/icash/src/providers/store-register/index.tsx"],"names":["createContext","useCallback","useContext","useEffect","useState","toast","api","useAuth","StoreRegisterContext","StoreRegisterProvider","children","showModalStore","setShowModalStore","stores","setStores","token","idStore","setIdStore","isLoading","setIsLoading","storeRegister","data","post","headers","Authorization","then","success","catch","error","storeUpdate","storeId","patch","get","res","err","console","log","useStoreRegister"],"mappings":"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","sourcesContent":["import {\n  createContext,\n  ReactNode,\n  useCallback,\n  useContext,\n  useEffect,\n  useState,\n} from \"react\";\nimport toast from \"react-hot-toast\";\nimport { number } from \"yup\";\nimport api from \"../../services/api\";\nimport { IData } from \"../../types/storeRegister\";\nimport { useAuth } from \"../Auth\";\n\ninterface StoreRegisterProps {\n  children: ReactNode;\n}\n\ninterface Stores {\n  name: string;\n  address: string;\n  city: string;\n  category: string;\n  cashback: number;\n  working_hours: string;\n  telephone: string;\n  store_img: string;\n  open: string;\n  onSale: string;\n  id: number;\n}\n\ninterface StoreRegisterData {\n  storeRegister: (\n    data: IData,\n    setshowModalStore: React.Dispatch<React.SetStateAction<boolean>>\n  ) => void;\n  showModalStore: boolean;\n  setShowModalStore: React.Dispatch<React.SetStateAction<boolean>>;\n  storeUpdate: (\n    data: IData,\n    setshowModalStore: React.Dispatch<React.SetStateAction<boolean>>,\n    storeId: number\n  ) => void;\n  stores: Stores[];\n  setIdStore: React.Dispatch<React.SetStateAction<number>>;\n  idStore: number;\n  isLoading: boolean;\n}\n\nconst StoreRegisterContext = createContext<StoreRegisterData>(\n  {} as StoreRegisterData\n);\n\nexport const StoreRegisterProvider = ({ children }: StoreRegisterProps) => {\n  const [showModalStore, setShowModalStore] = useState<boolean>(false);\n  const [stores, setStores] = useState<Stores[]>([] as Stores[]);\n  const { token } = useAuth();\n  const [idStore, setIdStore] = useState<number>(0);\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n\n  const storeRegister = useCallback(\n    (\n      data: IData,\n      setShowModalStore: React.Dispatch<React.SetStateAction<boolean>>\n    ) => {\n      api\n        .post(\"/stores\", data, {\n          headers: { Authorization: `Bearer ${token}` },\n        })\n        .then(() => {\n          toast.success(\"Loja Cadastrada\");\n          setShowModalStore(false);\n        })\n        .catch(() => toast.error(\"Erro ao cadastrar loja\"));\n    },\n    [token]\n  );\n\n  const storeUpdate = useCallback(\n    (\n      data: IData,\n      setShowModalStore: React.Dispatch<React.SetStateAction<boolean>>,\n      storeId\n    ) => {\n      api\n        .patch(`/stores/${storeId}`, data, {\n          headers: { Authorization: `Bearer ${token}` },\n        })\n        .then(() => {\n          toast.success(\"Dados atualizados\");\n          setShowModalStore(false);\n        })\n        .catch(() => toast.error(\"Erro ao atualizar dados\"));\n    },\n    [token]\n  );\n\n  useEffect(() => {\n    if (token) {\n      setIsLoading(true);\n      api\n        .get(\"/stores\", { headers: { Authorization: `Bearer ${token}` } })\n        .then((res) => {\n          setStores(res.data);\n          setIsLoading(false);\n        })\n        .catch((err) => console.log(err));\n    }\n  }, [token, storeRegister, storeUpdate]);\n\n  return (\n    <StoreRegisterContext.Provider\n      value={{\n        idStore,\n        setIdStore,\n        stores,\n        storeUpdate,\n        storeRegister,\n        setShowModalStore,\n        showModalStore,\n        isLoading,\n      }}\n    >\n      {children}\n    </StoreRegisterContext.Provider>\n  );\n};\n\nexport const useStoreRegister = () => useContext(StoreRegisterContext);\n"]},"metadata":{},"sourceType":"module"}