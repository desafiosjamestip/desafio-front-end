{"ast":null,"code":"var _jsxFileName = \"/home/pierre/Documentos/projects/novo/desafio-frontend/src/providers/Auth/index.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { createContext, useContext, useState } from \"react\";\nimport axios from \"axios\";\nimport toast from \"react-hot-toast\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserAuthContext = /*#__PURE__*/createContext({});\nexport const UserAuthProvider = ({\n  children\n}) => {\n  _s();\n\n  const getToken = localStorage.getItem(\"token\") || \"\";\n  const [token, setToken] = useState(getToken);\n\n  const userLogin = (data, history) => {\n    console.log(data);\n    axios.post(\"https://pierrekalil1.herokuapp.com/login\", data).then(res => {\n      localStorage.clear();\n      localStorage.setItem(\"token\", res.data.accessToken);\n      setToken(res.data.accessToken);\n      history.push(\"/dashboard\");\n      toast.success(\"Seja bem vindo!\");\n    }).catch(err => {\n      console.log(err, \"erro\");\n      toast.error(\"Email ou senha inválidos\");\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(UserAuthContext.Provider, {\n    value: {\n      token,\n      setToken,\n      userLogin\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n\n_s(UserAuthProvider, \"veextRurH5xSny9eKtwZLzZfq3s=\");\n\n_c = UserAuthProvider;\nexport const useAuthLogin = () => {\n  _s2();\n\n  return useContext(UserAuthContext);\n};\n\n_s2(useAuthLogin, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"UserAuthProvider\");","map":{"version":3,"sources":["/home/pierre/Documentos/projects/novo/desafio-frontend/src/providers/Auth/index.tsx"],"names":["createContext","useContext","useState","axios","toast","UserAuthContext","UserAuthProvider","children","getToken","localStorage","getItem","token","setToken","userLogin","data","history","console","log","post","then","res","clear","setItem","accessToken","push","success","catch","err","error","useAuthLogin"],"mappings":";;;;AAAA,SACEA,aADF,EAKEC,UALF,EAMEC,QANF,QAOO,OAPP;AAQA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,iBAAlB;;AAcA,MAAMC,eAAe,gBAAGL,aAAa,CAAW,EAAX,CAArC;AAEA,OAAO,MAAMM,gBAAgB,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAA6B;AAAA;;AAC3D,QAAMC,QAAQ,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,KAAiC,EAAlD;AACA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBV,QAAQ,CAACM,QAAD,CAAlC;;AAEA,QAAMK,SAAS,GAAG,CAACC,IAAD,EAAqBC,OAArB,KAA0C;AAC1DC,IAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;AACAX,IAAAA,KAAK,CACFe,IADH,CACQ,0CADR,EACoDJ,IADpD,EAEGK,IAFH,CAESC,GAAD,IAAS;AACbX,MAAAA,YAAY,CAACY,KAAb;AACAZ,MAAAA,YAAY,CAACa,OAAb,CAAqB,OAArB,EAA8BF,GAAG,CAACN,IAAJ,CAASS,WAAvC;AACAX,MAAAA,QAAQ,CAACQ,GAAG,CAACN,IAAJ,CAASS,WAAV,CAAR;AACAR,MAAAA,OAAO,CAACS,IAAR,CAAa,YAAb;AACApB,MAAAA,KAAK,CAACqB,OAAN,CAAc,iBAAd;AACD,KARH,EASGC,KATH,CASUC,GAAD,IAAS;AACdX,MAAAA,OAAO,CAACC,GAAR,CAAYU,GAAZ,EAAiB,MAAjB;AACAvB,MAAAA,KAAK,CAACwB,KAAN,CAAY,0BAAZ;AACD,KAZH;AAaD,GAfD;;AAiBA,sBACE,QAAC,eAAD,CAAiB,QAAjB;AAA0B,IAAA,KAAK,EAAE;AAAEjB,MAAAA,KAAF;AAASC,MAAAA,QAAT;AAAmBC,MAAAA;AAAnB,KAAjC;AAAA,cACGN;AADH;AAAA;AAAA;AAAA;AAAA,UADF;AAKD,CA1BM;;GAAMD,gB;;KAAAA,gB;AA4Bb,OAAO,MAAMuB,YAAY,GAAG;AAAA;;AAAA,SAAM5B,UAAU,CAACI,eAAD,CAAhB;AAAA,CAArB;;IAAMwB,Y","sourcesContent":["import {\n  createContext,\n  Dispatch,\n  ReactNode,\n  SetStateAction,\n  useContext,\n  useState,\n} from \"react\";\nimport axios from \"axios\";\nimport toast from \"react-hot-toast\";\nimport { History } from \"history\";\nimport { UserAuthData } from \"../../types/AuthUser\";\n\ninterface AuthProps {\n  children: ReactNode;\n}\n\ninterface AuthData {\n  userLogin: (data: UserAuthData, history: History) => void;\n  token: string;\n  setToken: Dispatch<SetStateAction<string>>;\n}\n\nconst UserAuthContext = createContext<AuthData>({} as AuthData);\n\nexport const UserAuthProvider = ({ children }: AuthProps) => {\n  const getToken = localStorage.getItem(\"token\") || \"\";\n  const [token, setToken] = useState(getToken);\n\n  const userLogin = (data: UserAuthData, history: History) => {\n    console.log(data);\n    axios\n      .post(\"https://pierrekalil1.herokuapp.com/login\", data)\n      .then((res) => {\n        localStorage.clear();\n        localStorage.setItem(\"token\", res.data.accessToken);\n        setToken(res.data.accessToken);\n        history.push(\"/dashboard\");\n        toast.success(\"Seja bem vindo!\");\n      })\n      .catch((err) => {\n        console.log(err, \"erro\");\n        toast.error(\"Email ou senha inválidos\");\n      });\n  };\n\n  return (\n    <UserAuthContext.Provider value={{ token, setToken, userLogin }}>\n      {children}\n    </UserAuthContext.Provider>\n  );\n};\n\nexport const useAuthLogin = () => useContext(UserAuthContext);\n"]},"metadata":{},"sourceType":"module"}